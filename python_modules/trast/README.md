# Trast Parser с поддержкой прокси

## Описание

Обновленный парсер для сайта trast-zapchast.ru с поддержкой:
- Обхода Cloudflare блокировок через прокси
- Умной остановки при 3 пустых страницах подряд
- Автоматической смены прокси при блокировке
- Валидации прокси перед использованием

## Новые возможности

### 1. Система прокси
- Автоматическое скачивание прокси с [Proxifly](https://github.com/proxifly/free-proxy-list)
- Кэширование прокси на 1 час
- Валидация прокси перед использованием
- Автоматическая смена при блокировке

### 2. Умная остановка
- Остановка парсинга при 3 пустых страницах подряд
- Счетчик пустых страниц сбрасывается при успешном парсинге

### 3. Обход блокировок
- Детекция Cloudflare блокировок
- Автоматическая смена прокси при обнаружении блокировки
- Дополнительные настройки Chrome для обхода детекции

## Файлы

- `main.py` - основной парсер с поддержкой прокси
- `proxy_manager.py` - менеджер прокси для работы с Proxifly

## Использование

```bash
cd python_modules/trast
python main.py
```

## Логи

Парсер создает подробные логи в директории `storage/app/public/output/logs-trast/` с информацией о:
- Используемых прокси
- Обнаруженных блокировках
- Смене прокси
- Количестве пустых страниц

## Настройки

В коде можно изменить:
- `MAX_EMPTY_PAGES = 3` - количество пустых страниц для остановки
- `max_retries = 3` - количество попыток смены прокси
- `max_proxies = 50` - максимальное количество проверяемых прокси

