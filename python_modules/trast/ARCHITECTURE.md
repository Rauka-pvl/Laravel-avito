# Архитектура системы парсинга с прокси

```
┌─────────────────────────────────────────────────────────────────┐
│                        Trast Parser                            │
├─────────────────────────────────────────────────────────────────┤
│  main.py                                                       │
│  ├─ Инициализация прокси-менеджера                             │
│  ├─ Создание драйвера с прокси                                 │
│  ├─ Парсинг страниц с проверкой блокировки                     │
│  └─ Умная остановка при пустых страницах                       │
├─────────────────────────────────────────────────────────────────┤
│  proxy_manager.py                                              │
│  ├─ Скачивание прокси с Proxifly                               │
│  ├─ Кэширование прокси (1 час)                                │
│  ├─ Валидация прокси                                           │
│  └─ Ротация прокси при блокировке                              │
├─────────────────────────────────────────────────────────────────┤
│  Proxifly Repository                                           │
│  └─ https://github.com/proxifly/free-proxy-list                │
│      ├─ HTTP прокси                                            │
│      ├─ HTTPS прокси                                           │
│      └─ Обновление каждые 5 минут                             │
└─────────────────────────────────────────────────────────────────┘

Поток выполнения:
1. Инициализация ProxyManager
2. Скачивание/загрузка прокси из кэша
3. Валидация прокси (тест на httpbin.org/ip)
4. Создание Chrome драйвера с прокси
5. Парсинг страниц с проверкой блокировки
6. При блокировке → смена прокси → повтор
7. При 3 пустых страницах → остановка парсинга

Обход блокировок:
- Детекция Cloudflare элементов
- Случайные задержки между запросами
- Смена User-Agent
- Отключение автоматизации Chrome
- Ротация прокси при обнаружении блокировки
